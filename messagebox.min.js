/**
 * jQuery MessageBox Plugin
 * Github: http://github.com/yali4/messagebox/
 * Link: http://yalcinceylan.net/messagebox
 * Copyright: October 2013
 * Creator: Yalçın CEYLAN
 * Github: http://github.com/yali4/
 * Website: http://yalcinceylan.net
 * License: MIT <http://opensource.org/licenses/mit-license.php>
*/

(function(e){e.fn.MessageBox=function(t,n,r,i,s){var o=e(this);o[t](function(t){if(i&&i==true){t.returnValue=false;if(t.preventDefault){t.preventDefault()}}if(s&&s==true){t.cancelBubble=true;if(t.stopPropagation){t.stopPropagation()}}if(o.blur){o.blur()}e.MessageBox(n,r,o)})};e.MessageBoxArray=new Array;e.MessageBox=function(t,n,r){var t=e.extend({title:"Title",content:"Description",type:"information",buttons:{confirm:{title:"Continue",style:"continue"},cancel:{title:"Cancel",style:"cancel"}},style:{modal:"messagebox-background",dialog:"messagebox-dialog",content:"messagebox-content",buttons:"messagebox-buttons",timeout:"messagebox-timer"},background:"#000",opacity:"0.6",animate:{open:false,close:false,speed:false},timeout:{second:false,screen:false},modalclose:false,usekey:false},t);var i={};i.createDialog=function(){i.background=e("<div/>",{"class":t.style.modal,css:{background:t.background,opacity:t.opacity}});i.background.css({display:"none"});i.background.appendTo("body");if(t.modalclose){i.background.click(function(){i.response=false;i.removeDialog()})}i.dialog=e("<div/>",{"class":t.style.dialog});i.content=e("<div/>",{"class":t.style.content});i.content.appendTo(i.dialog);i.title=e("<h1/>",{"class":"title",html:t.title});i.title.appendTo(i.content);i.description=e("<div/>",{"class":"description",html:t.content});i.description.appendTo(i.content);i.buttons=e("<div/>",{"class":t.style.buttons});i.buttons.appendTo(i.dialog);var n={};if(t.type=="confirmation"||t.type=="information"){if(t.buttons.confirm.title){n.confirm=e("<button/>",{"class":t.buttons.confirm.style,html:t.buttons.confirm.title});n.confirm.appendTo(i.buttons);n.confirm.click(function(){i.response=true;i.removeDialog()})}}if(t.type=="confirmation"){if(t.buttons.cancel.title){n.cancel=e("<button/>",{"class":t.buttons.cancel.style,html:t.buttons.cancel.title});n.cancel.appendTo(i.buttons);n.cancel.click(function(){i.response=false;i.removeDialog()})}}i.dialog.appendTo("body");i.width=i.dialog.width();i.height=i.dialog.height();i.windowWidth=document.documentElement.clientWidth;i.windowHeight=document.documentElement.clientHeight;i.leftCenter=(i.windowWidth-i.width)*.5;i.topCenter=(i.windowHeight-i.height)*.5;i.bottom=i.windowHeight-i.height;i.right=i.windowWidth-i.width;if(t.animate.speed&&t.animate.open){switch(t.animate.open){case"top":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,left:i.leftCenter}).animate({opacity:1,top:i.topCenter},t.animate.speed);break;case"left":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:i.topCenter}).animate({opacity:1,left:i.leftCenter},t.animate.speed);break;case"right":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:i.topCenter,left:i.right}).animate({opacity:1,left:i.leftCenter},t.animate.speed);break;case"bottom":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,left:i.leftCenter,top:i.bottom}).animate({opacity:1,top:i.topCenter},t.animate.speed);break;case"topLeft":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:0,left:0}).animate({opacity:1,top:i.topCenter,left:i.leftCenter},t.animate.speed);break;case"topRight":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:0,left:i.right}).animate({opacity:1,top:i.topCenter,left:i.leftCenter},t.animate.speed);break;case"bottomLeft":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:i.bottom,left:0}).animate({opacity:1,top:i.topCenter,left:i.leftCenter},t.animate.speed);break;case"bottomRight":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:i.bottom,left:i.right}).animate({opacity:1,top:i.topCenter,left:i.leftCenter},t.animate.speed);break;case"topFade":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:i.topCenter-25,left:i.leftCenter}).animate({opacity:1,top:i.topCenter},t.animate.speed);break;case"bottomFade":i.background.fadeIn(t.animate.speed);i.dialog.css({opacity:0,top:i.topCenter+25,left:i.leftCenter}).animate({opacity:1,top:i.topCenter},t.animate.speed);break}}else{i.background.show();i.dialog.css({left:i.leftCenter,top:i.topCenter})}i.timeout=e("<div/>",{"class":t.style.timeout,css:{display:"none"}});i.timeout.appendTo(i.buttons)};var s=function(){i.leftCenter=(document.documentElement.clientWidth-i.dialog.width())*.5;i.topCenter=(document.documentElement.clientHeight-i.dialog.height())*.5;i.dialog.stop().animate({left:i.leftCenter,top:i.topCenter})};var o={enter:13,space:32,escape:27};var u=function(e){e=e||window.event;if(t.type=="confirmation"||t.type=="information"){if(e.keyCode==o.escape){e.returnValue=false;if(e.preventDefault){e.preventDefault()}i.response=false;i.removeDialog()}if(e.keyCode==o.enter||e.keyCode==o.space){e.returnValue=false;if(e.preventDefault){e.preventDefault()}i.response=true;i.removeDialog()}}};i.addEventListener=function(e,t,n,r){if(typeof e.addEventListener==="function"){e.addEventListener(t,n,r)}else if(e.attachEvent){e.attachEvent(t,n,r)}};i.removeEventListener=function(e,t,n,r){if(typeof e.removeEventListener==="function"){e.removeEventListener(t,n,r)}else if(e.detachEvent){e.detachEvent(t,n,r)}};i.getUniqueId=function(e){var t=[];for(var n=0;n<e;n++){t.push(Math.floor(Math.random()*10))}return t.join("")};i.addUseKey=function(){if(t.usekey){i.addEventListener(document,"keydown",u,false);i.addEventListener(document,"onkeydown",u,false)}};i.removeUseKey=function(){if(t.usekey){i.removeEventListener(document,"keydown",u,false);i.removeEventListener(document,"onkeydown",u,false)}};i.closeDialog=function(){i.dialog.remove();i.background.remove();i.removeEventListener(window,"resize",s,false);i.removeEventListener(window,"onresize",s,false);i.removeUseKey();if(typeof parseInt(t.timeout.second)=="number"&&parseInt(t.timeout.second)>0){clearInterval(i.interval)}if(typeof n==="function"){n.call(r,i.response)}delete e.MessageBoxArray[i.id];var o=false;for(var u in e.MessageBoxArray){o=u}if(o){e.MessageBoxArray[o].show()}};i.removeDialog=function(){if(typeof i.response==="undefined"){i.response=false}if(t.animate.speed&&t.animate.close){switch(t.animate.close){case"top":i.dialog.animate({top:"+=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,top:0},t.animate.speed,function(){i.closeDialog()})});break;case"left":i.dialog.animate({left:"+=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,left:0},t.animate.speed,function(){i.closeDialog()})});break;case"right":i.dialog.animate({left:"-=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,left:i.right},t.animate.speed,function(){i.closeDialog()})});break;case"bottom":i.dialog.animate({top:"-=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,top:i.bottom},t.animate.speed,function(){i.closeDialog()})});break;case"topLeft":i.dialog.animate({left:"+=50",top:"+=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,left:0,top:0},t.animate.speed,function(){i.closeDialog()})});break;case"topRight":i.dialog.animate({left:"-=50",top:"+=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,left:i.right,top:0},t.animate.speed,function(){i.closeDialog()})});break;case"bottomLeft":i.dialog.animate({left:"+=50",top:"-=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,left:0,top:i.bottom},t.animate.speed,function(){i.closeDialog()})});break;case"bottomRight":i.dialog.animate({left:"-=50",top:"-=50"},"fast",function(){i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0,left:i.right,top:i.bottom},t.animate.speed,function(){i.closeDialog()})});break;case"fadeOut":i.background.fadeOut(t.animate.speed);i.dialog.animate({opacity:0},t.animate.speed,function(){i.closeDialog()});break}}else{i.closeDialog()}};i.insertDialog=function(){for(var n in e.MessageBoxArray){e.MessageBoxArray[n].hide()}if(typeof i.id==="undefined"){i.id=i.getUniqueId(48)}i.createDialog();i.addEventListener(window,"resize",s,false);i.addEventListener(window,"onresize",s,false);i.addUseKey();if(typeof parseInt(t.timeout.second)=="number"&&parseInt(t.timeout.second)>0){i.remaining=parseInt(t.timeout.second);i.timeout.html(i.remaining);if(t.timeout.screen){i.timeout.css({display:"block"})}i.interval=setInterval(function(){if(i.remaining>0){i.remaining--;i.timeout.html(i.remaining)}if(i.remaining==0){i.removeDialog()}},1e3)}output={title:function(e){i.title.html(e)},content:function(e){i.description.html(e)},hide:function(){i.removeUseKey();i.dialog.hide();i.background.hide()},show:function(){i.addUseKey();i.dialog.fadeIn();i.background.fadeIn()},close:function(){i.removeDialog()}};e.MessageBoxArray[i.id]=output;return output};return i.insertDialog()}})(jQuery)
